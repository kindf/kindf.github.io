<!doctype html>
<html lang="en-us">
  <head>
    <title>makefile学习 // 恶意</title>
    <meta charset="utf-8" />
    <meta name="generator" content="Hugo 0.60.1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="kindf" />
    <meta name="description" content="" />
    <link rel="stylesheet" href="https://kindf.github.io/css/main.min.61bb32028587f24ca28522d8d197970c7ef33284e5fffb45a75fcbbb2dbc4dcb.css" />

    
    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="makefile学习"/>
<meta name="twitter:description" content="编译时，编译器只检测程序语法和函数、变量是否被声明。如果函数未被声明，编译器会给出一个警告，但能生成object file
链接时，链接器会在所有object file中寻找函数的实现，如找不到就会报链接错误码（Linker Error）
自动推导：只要make看到一个.o文件就会自动把.c文件加到依赖关系中，并且cc -c &hellip;.c也会被推导出来
.PHONY:clean .PHONY表示clean是个伪目标文件
include &lt;filename&gt; filename可以是当前操作系统shell的文件模式（可以包含路径和通配符），include前面不能以tab键开始
 include查找路径（若没指定路径）:
   1、如果make执行时，有“-I”或“&ndash;inlcude-dir”参数，make会在该参数所指定的目录下寻找
    2、如果目录&lt;prefix&gt;/include（一般是：/usr/local/bin 或/usr/include）存在的话，make 也会去找
    -include /&lt;filename&gt;表示无论include过程中出现什么错误都不要报错继续执行
  GUN的make工作时的执行步骤：  1、读入所有的 Makefile。
  2、读入被 include 的其它 Makefile。
  3、初始化文件中的变量。
  4、推导隐晦规则，并分析所有规则。
  5、为所有的目标文件创建依赖关系链。
  6、根据依赖关系，决定哪些目标要重新生成。
  7、执行生成命令。
 文件搜索  VPATH特殊变量:如果没有指明这个变量，make只会在当前的目录中去找寻依赖文件和目标文件。如果定义了这个变量，那么，make 就会在当当前目录找不到的情况下，到所指定的目录中去找寻文件了。
 例：VPATH = src:../headers（先在当前目录搜索，然后是src目录和../headers目录
   vpath关键字（全小写）："/>

    <meta property="og:title" content="makefile学习" />
<meta property="og:description" content="编译时，编译器只检测程序语法和函数、变量是否被声明。如果函数未被声明，编译器会给出一个警告，但能生成object file
链接时，链接器会在所有object file中寻找函数的实现，如找不到就会报链接错误码（Linker Error）
自动推导：只要make看到一个.o文件就会自动把.c文件加到依赖关系中，并且cc -c &hellip;.c也会被推导出来
.PHONY:clean .PHONY表示clean是个伪目标文件
include &lt;filename&gt; filename可以是当前操作系统shell的文件模式（可以包含路径和通配符），include前面不能以tab键开始
 include查找路径（若没指定路径）:
   1、如果make执行时，有“-I”或“&ndash;inlcude-dir”参数，make会在该参数所指定的目录下寻找
    2、如果目录&lt;prefix&gt;/include（一般是：/usr/local/bin 或/usr/include）存在的话，make 也会去找
    -include /&lt;filename&gt;表示无论include过程中出现什么错误都不要报错继续执行
  GUN的make工作时的执行步骤：  1、读入所有的 Makefile。
  2、读入被 include 的其它 Makefile。
  3、初始化文件中的变量。
  4、推导隐晦规则，并分析所有规则。
  5、为所有的目标文件创建依赖关系链。
  6、根据依赖关系，决定哪些目标要重新生成。
  7、执行生成命令。
 文件搜索  VPATH特殊变量:如果没有指明这个变量，make只会在当前的目录中去找寻依赖文件和目标文件。如果定义了这个变量，那么，make 就会在当当前目录找不到的情况下，到所指定的目录中去找寻文件了。
 例：VPATH = src:../headers（先在当前目录搜索，然后是src目录和../headers目录
   vpath关键字（全小写）：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://kindf.github.io/post/makefile_learn/" />
<meta property="article:published_time" content="2019-12-27T22:29:05+08:00" />
<meta property="article:modified_time" content="2019-12-27T22:29:05+08:00" />


  </head>
  <body>
    <header class="app-header">
      <a href="https://kindf.github.io/"><img class="app-header-avatar" src="/avatar.jpg" alt="kindf" /></a>
      <h1>恶意</h1>
      <p>学习笔记</p>
      <div class="app-header-social">
        
          <a target="_blank" href="https://www.github.com/kindf" rel="noreferrer noopener"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-github">
  <title>github</title>
  <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
</svg></a>
        
          <a target="_blank" href="https://www.baidu.com" rel="noreferrer noopener"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-link">
  <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
  <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
</svg></a>
        
      </div>
    </header>
    <main class="app-container">
      
  <article class="post">
    <header class="post-header">
      <h1 class ="post-title">makefile学习</h1>
      <div class="post-meta">
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar">
  <title>calendar</title>
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line>
</svg>
          Dec 27, 2019
        </div>
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock">
  <title>clock</title>
  <circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline>
</svg>
          1 min read
        </div></div>
    </header>
    <div class="post-content">
      <p>编译时，编译器只检测程序语法和函数、变量是否被声明。如果函数未被声明，编译器会给出一个警告，但能生成object file</p>
<p>链接时，链接器会在所有object file中寻找函数的实现，如找不到就会报链接错误码（Linker Error）</p>
<p>自动推导：只要make看到一个.o文件就会自动把.c文件加到依赖关系中，并且cc -c &hellip;.c也会被推导出来</p>
<p>.PHONY:clean  .PHONY表示clean是个伪目标文件</p>
<p>include &lt;filename&gt; filename可以是当前操作系统shell的文件模式（可以包含路径和通配符），include前面不能以tab键开始</p>
<blockquote>
<p>include查找路径（若没指定路径）:</p>
</blockquote>
<blockquote>
<blockquote>
<p>1、如果make执行时，有“-I”或“&ndash;inlcude-dir”参数，make会在该参数所指定的目录下寻找</p>
</blockquote>
</blockquote>
<blockquote>
<blockquote>
<p>2、如果目录&lt;prefix&gt;/include（一般是：/usr/local/bin 或/usr/include）存在的话，make 也会去找</p>
</blockquote>
</blockquote>
<blockquote>
<blockquote>
<p>-include /&lt;filename&gt;表示无论include过程中出现什么错误都不要报错继续执行</p>
</blockquote>
</blockquote>
<h5 id="gunmake">GUN的make工作时的执行步骤：</h5>
<blockquote>
<p>1、读入所有的 Makefile。</p>
</blockquote>
<blockquote>
<p>2、读入被 include 的其它 Makefile。</p>
</blockquote>
<blockquote>
<p>3、初始化文件中的变量。</p>
</blockquote>
<blockquote>
<p>4、推导隐晦规则，并分析所有规则。</p>
</blockquote>
<blockquote>
<p>5、为所有的目标文件创建依赖关系链。</p>
</blockquote>
<blockquote>
<p>6、根据依赖关系，决定哪些目标要重新生成。</p>
</blockquote>
<blockquote>
<p>7、执行生成命令。</p>
</blockquote>
<h5 id="heading">文件搜索</h5>
<blockquote>
<p>VPATH特殊变量:如果没有指明这个变量，make只会在当前的目录中去找寻依赖文件和目标文件。如果定义了这个变量，那么，make 就会在当当前目录找不到的情况下，到所指定的目录中去找寻文件了。</p>
<blockquote>
<p>例：VPATH = src:../headers（先在当前目录搜索，然后是src目录和../headers目录</p>
</blockquote>
</blockquote>
<blockquote>
<p>vpath关键字（全小写）：</p>
<blockquote>
<p>1、vpath &lt;pattern&gt; &lt;directories&gt;：为符合模式&lt;pattern&gt;的文件指定搜索目录&lt;directories&gt;。<br>
2、vpath &lt;pattern&gt;：清除符合模式&lt;pattern&gt;的文件的搜索目录。<br>
3、vpath：清除所有已被设置好了的文件搜索目录。<br>
4、vapth 使用方法中的&lt;pattern&gt;需要包含“%”字符，“%”的意思是匹配零或若干字符。<br>
例子：vpath %.h ../headers(表示，要求 make 所有以“.h”结尾的文件在“../headers”目录下搜索)</p>
</blockquote>
</blockquote>
<h5 id="heading1">静态模式</h5>
<blockquote>
<p>语法：&lt;targets &hellip;&gt;: &lt;target-pattern&gt;: &lt;prereq-patterns &hellip;&gt;<br>
      &lt;commands&gt;<br>
      &hellip;</p>
</blockquote>
<blockquote>
<p>&amp;lttargets &hellip;&amp;gt ： 定义了一系列的目标文件，可以有通配符。是目标的一个集合。<br>
target-parrtern:是指明了 targets 的模式，也就是的目标集模式。(即在targets中取符合要求的文件)（应含有%通配符）<br>
prereq-parrterns:是目标的依赖模式，即对target-parrtern再进行一次依赖目标的定义（应含有%通配符）<br>
例子:</p>
<blockquote>
<p>objects = foo.o bar.o<br>
all: $(objects)<br>
$(objects): %.o: %.c (%.o表示从目标集合中获取所有.o文件，%.c表示去.o文件并替换.o为.c)<br>
$(CC) -c $(CFLAGS) $&lt; -o $@ (“$&lt;”表示所有的依赖目标集（也就是“foo.c bar.c”），“$@”表示目标集（也就是“foo.o bar.o”）)</p>
</blockquote>
</blockquote>

    </div>
    <div class="post-footer">
      
    </div>
  </article>

    </main>
  </body>
</html>
